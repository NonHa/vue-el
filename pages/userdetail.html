<!DOCTYPE html>
<html>
	<head>
	  <meta charset="utf-8">
	  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	  <title>个人中心</title>
	  <link rel="icon" href="img/yipiao-2.png" type="image/x-icon">
	  <link rel="stylesheet" href="../resource/layui-v2.5.6/layui/css/layui.css">
	  <link rel="stylesheet" type="text/css" href="css/base.css"/>
	  <link rel="stylesheet" href="css/main.css">
	</head>
	<body>
		<div id="app">
			<!-- 导航栏 -->
			<div class="layui-header layui-hide-xs layui-bg-black">
				<div class="layui-container">
					<a href="../index.html" >
						<div class="layui-logo" style="color:Aqua;">
							<h1>一瓢婚恋网</h1>
						</div>
					</a>
					<ul class="layui-nav layui-layout-left">
						<li class="layui-nav-item"><a href="../index.html">首页</a></li>
						<li class="layui-nav-item">
							<a href="#">会员群体</a>
							<dl class="layui-nav-child">
								<dd><a href="vip.html?v=creater">联合创始人</a></dd>
								<dd><a href="vip.html?v=vip">名士/名媛</a></dd>
							</dl>
						</li>
						<li class="layui-nav-item"><a href="physical_store.html">实体门店</a></li>
					</ul>
					<ul class="layui-nav layui-layout-right">
						<li class="layui-nav-item"><a href="message.html">消息<span class="layui-badge-dot"></span></a></li>
						<li class="layui-nav-item">
							<a href="userbase.html" id=""><img name="touxiang" id="touxiang" src="img/default.jpg" class="layui-nav-img">
								<font id="nickname">我</font>
							</a>
							<dl class="layui-nav-child">
								<dd><a href="userbase.html">基本资料</a></dd>
								<dd><a href="security.html">安全设置</a></dd>
							</dl>
						</li>
						<li class="layui-nav-item"><a id="login" href="#" onclick="login1()" role="button" class=""
							 data-toggle="modal">登录</a></li>
						<li class="layui-nav-item"><a href="#" id="exit" onclick="exit()" class="">退出</a></li>
					</ul>
				</div>
			</div>
			<!-- 主页面 -->
				<div class="layui-container">
					<!-- 侧边 -->
					<div id="sidebar" class="sidebar-left layui-col-sm3 layui-col-md3">
						<ul class="layui-tree">
							<div class="layui-anim layui-anim-upbit">
								<div class="layui-upload">
									<a class="site-demo-upload">
										<div class="layui-upload-list" id="headpreview">
											<img name="touxiang" src="img/default.jpg" alt="点击修改头像" class="headicon">
										</div>
									</a>
								</div>
							</div>
							<li class="layui-collapse">
								<div class="layui-colla-item">
									<h2 class="layui-colla-title layui-nav-item">个人信息</h2>
									<div class="layui-colla-content layui-show">
										<dd><a href="userbase.html" class="layui-nav-item">基本资料</a></dd>
										<dd><a href="userdetail.html" class="layui-nav-item">详细资料</a></dd>
										<dd><a href="matewanted.html" class="layui-nav-item">择偶标准</a></dd>
									</div>
								</div>
							</li>
							<li class="layui-colla-title"><a href="authenticate.html" class="layui-nav-item">我的认证</a></li>
							<li class="layui-collapse">
								<div class="layui-colla-item">
									<h2 class="layui-colla-title layui-nav-item">会员服务</h2>
									<dl class="layui-colla-content">
										<dd><a href="reservation.html" class="layui-nav-item">爱情定制</a></dd>
										<dd><a href="vip.html" class="layui-nav-item">线下约会</a></dd>
										<dd><a href="search.html" class="layui-nav-item">搜索匹配</a></dd>
									</dl>
								</div>
							</li>
							<li class="layui-collapse">
								<div class="layui-colla-item">
									<h2 class="layui-colla-title layui-nav-item">系统设置</h2>
									<dl class="layui-colla-content">
										<dd><a href="security.html" class="layui-nav-item">修改密码</a></dd>
									</dl>
								</div>
							</li>
						</ul>
					</div>
					<!-- 表单 -->
					<div id="mainbar" class="layui-col-xs12 layui-col-sm9 layui-col-md9">
						<div class="layui-row">
						<br/><div class="layui-row text-center">
							   <h2>我的详细资料</h2>
						</div>
						<hr class="layui-bg-green"><br/>
							<form class="layui-form" lay-filter="baseinfo" method="post" action="../webapi.php?rand=0.1002121545435">
								 <!-- 1.体重 2.身高  4.籍贯 5.民族 3.职业 6.收入状况-->
								 <input type="text" name="operate" class="layui-hide" value="updateBasicInfo">
								 <div class="layui-form-item">
								   <label class="layui-form-label">生日</label>
								   <div class="layui-input-block" >
									 <input type="text" name="birthday" lay-verify="required" class="layui-input" id="brithday" placeholder="选择日期">
								   </div>
								 </div>
								  <div class="layui-form-item">
								        <label class="layui-form-label">身高</label>
								        <div class="layui-input-block" >
								          <select name="height" lay-verify="required" lay-search="" lay-skin="select">
											  <option value="">单位:cm</option>
								          </select>
								        </div>
								  </div>
								  <div class="layui-form-item">
								  	<label class="layui-form-label">体重</label>
								  	<div class="layui-input-block" >
								  	  <select name="weight" lay-verify="required" lay-search lay-skin="select">
								  		<option value="">单位：kg</option>
								  	  </select>
								  	</div>
								  </div>
								  <div class="layui-form-item">
								        <label class="layui-form-label">学历</label>
								        <div class="layui-input-block" >
								          <select name="education" lay-verify="required" lay-search lay-skin="select">
													<option value="">请选择</option>
								          </select>
								        </div>
								  </div>
								  <div class="layui-form-item">
									  <label class="layui-form-label">毕业学校</label>
									  <div class="layui-input-block" >
											<input type="text" name="graduated_school" lay-verify="required" placeholder="输入您的毕业学校" autocomplete="off" class="layui-input">
									  </div>
								  </div>
								  <div class="layui-form-item">
								        <label class="layui-form-label">民族</label>
								        <div class="layui-input-block" >
								          <select id="nation" name="nation" lay-verify="required" lay-search="" lay-skin="select">
											<option value="">请选择</option>
								          </select>
								        </div>
								  </div>
								  <div class="layui-form-item">
								  	<label class="layui-form-label">籍贯</label>
								  	<div class="layui-input-block" >
								  	  <input type="text" name="hometown" lay-verify="required" placeholder="哪里人" autocomplete="off" class="layui-input">
								  	</div>
								  </div>
								  <div class="layui-form-item" id="area-picker">
									  <div class="layui-form-label">工作地点</div>
									  <div class="layui-input-block" >
										<select name="province" class="province-selector" data-value="湖南省" lay-verify="required" id="province-1" lay-filter="province-1">
										  <option value="">请选择省</option>
										</select>
									  </div>
									  <div class="layui-input-block" >
										<select name="city" class="city-selector" data-value="长沙市" lay-verify="required" id="city-1"  lay-filter="city-1">
										  <option value="">请选择市</option>
										</select>
									  </div>
									  <div class="layui-input-block" >
										<select name="county" class="county-selector" lay-verify="required" id="county-1" lay-filter="county-1">
										  <option value="">请选择区</option>
										</select>
									  </div>
									</div>
								  <div class="layui-form-item">
									  <label class="layui-form-label">职业</label>
									  <div class="layui-input-block" >
											<input type="text" name="job" lay-verify="required" placeholder="输入您的职业" autocomplete="off" class="layui-input">
									  </div>
								  </div>
								  <div class="layui-form-item">
								        <label class="layui-form-label">月收入</label>
								        <div class="layui-input-block" >
								          <select name="salary" lay-verify="required" lay-search="" lay-skin="select">
												<option value="">请选择</option>
												<option value="0">3000-5000</option>
												<option value="1">5001-8000</option>
												<option value="2">8001-12000</option>
												<option value="3">12001-20000</option>
												<option value="4">20001-50000</option>
												<option value="5">50000以上</option>
								          </select>
								        </div>
								    </div>
								  <!-- 7.是否吸烟or喝酒 8.婚姻状况 9.经济条件 10.是否有孩子？是否想要孩子 -->
								  <div class="layui-form-item">
								        <label class="layui-form-label">烟</label>
								        <div class="layui-input-block" >
								          <select name="smoke" lay-search="" lay-skin="select">
												<option value="0">不吸烟</option>
								  				<option value="1">吸烟</option>
												<option value="2">偶尔会抽一下</option>
								          </select>
								        </div>
								  </div>
								  <div class="layui-form-item">
								  	<label class="layui-form-label">酒</label>
								  	<div class="layui-input-block" >
								  	  <select name="drink" lay-search="" lay-skin="select">
								  			<option value="0">不喝酒</option>
								  			<option value="1">喝酒</option>
								  			<option value="2">偶尔会喝一点</option>
								  	  </select>
								  	</div>
								  </div>
									<div class="layui-form-item">
									    <label class="layui-form-label">婚姻状况</label>
									    <div class="layui-input-block" >
											<!-- （0未婚；1离异；2丧偶；3已婚） <strong></strong> -->
									      <input type="radio" name="marital_status" title="单身" value="0" >
									      <input type="radio" name="marital_status" title="离异" value="1" >
									      <input type="radio" name="marital_status" title="丧偶" value="2" >
										  <input type="radio" name="marital_status" title="已婚" value="3" >
									    </div>
									</div>
									<div class="layui-form-item">
									    <label class="layui-form-label">何时结婚</label>
									    <div class="layui-input-block"  >
											<!-- 何时结婚（0:看情况而定；1:1年内；2：2年内；3:3年内）  -->
											  <select name="when_marry" lay-verify="required" lay-skin="select">
											  <option value="0">看情况而定</option>
											  <option value="1">1年内</option>
											  <option value="2">2年内</option>
											  <option value="3">3年内</option>
											  </select>
									    </div>
									</div>
									<div class="layui-form-item">
									    <label class="layui-form-label">经济条件</label>
									    <div class="layui-input-block" >
									      <input type="checkbox" name="house" title="有房" value="1">
									      <input type="checkbox" name="car" title="有车" value="1">
									    </div>
									</div>
									<div class="layui-form-item">
									    <label class="layui-form-label">星座</label>
									    <div class="layui-input-block" >
											  <select name="constellation" lay-verify="required" lay-skin="select">
												<option value="">请选取星座</option>
											  </select>
									    </div>
									</div>
								  <div class="layui-form-item">
								      <label class="layui-form-label">有无子女</label>
								      <div class="layui-input-block" >
								        <input type="radio" name="child" title="有子女" value="1">
								        <input type="radio" name="child" title="无子女" value="0">
								      </div>
								  </div>
								  <div class="layui-form-item">
									  <label class="layui-form-label">生育观念</label>
									  <div class="layui-input-block" >
										  <!-- （0不要；1想要；2还没想好 -->
									    <input type="radio" name="wanna_child" title="丁克家庭"  value="0">
									    <input type="radio" name="wanna_child" title="想要孩子" value="1">
										<input type="radio" name="wanna_child" title="还没想好" value="2">
									  </div>
								    </div>
								  <br/><br/> 
								  <div class="layui-form-item">
								    <div class="layui-input-block" >
								      <button class="layui-btn" lay-submit >立即提交</button>
								      <button type="reset" class="layui-btn layui-btn-primary">重置</button>
								    </div>
								  </div>
							</form>
					</div>
				</div>
				<!-- 手机按钮 -->
				<div>
					<div class="sidebar-mobile-left layui-hide-md layui-hide-sm" id="leftbtn" >
						<i class="layui-icon layui-icon-right" style="font-size: 1.5625rem;" ></i>
					</div>
					<div id="shade"></div>
				</div>
			</div>
		</div>
	</body>
	<script src="../resource/layui-v2.5.6/layui/layui.all.js"></script>
	<script src="js/base.js"></script>
	<script src="js/data.js"></script>
	<script src="js/util.js"></script>
	<script src="js/classie.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		var user_id = 0;
		var $=layui.$;
		
		var menuLeft = document.getElementById( 'sidebar' ),//左边菜单栏
			showLeft = document.getElementById( 'leftbtn' ),//点击按钮
			barshade =document.getElementById( 'shade' ),
			body = document.body;
		showLeft.onclick = function() {
			classie.toggle( this, 'active' );
			classie.toggle( menuLeft, 'sidebar-open' );
			classie.toggle( barshade,'bar-shade');
		};
		barshade.onclick = function() {
			classie.toggle( menuLeft, 'sidebar-open' );
			classie.toggle( barshade,'bar-shade');
		}
		
		
		$(function(){
			var data={
				"operate":"getBasicInfo"
			};
			Ajax(ajax_getFans,data);
		});
		
		var ajax_getFans = function(obj){
			var form=layui.form;
			if(obj.Code>0)layer.msg(obj.Msg);
			else {
				var ary = JSON.parse(obj.Result); 
				session = obj.session;
				user_id = session.userid;
				checkLogin();
				IconUpload(user_id);
				$("img[name='touxiang']").attr("src",decodeURIComponent(ary.user.photo));
				if(0==ary.basicInfo.house)ary.basicInfo.house="";
				if(0==ary.basicInfo.car)ary.basicInfo.car="";
				if(ary.basicInfo){
					form.val("baseinfo",ary.basicInfo);
					//手动地区
					areaval(ary.basicInfo.job_addr);
				}
			}
		};
		$(document).ready(function(){
			var ag= $("select[name='age']");
			var ta= $("select[name='height']");
			var wei=$("select[name='weight']");
			for(var i=18;i<=60;i++){
				ag.append("<option value ="+i+">"+i+"</option>");
			}
			
			for(var i=120;i<=220;i++){
				ta.append("<option value ="+i+">"+i+"</option>");
			}
			for(var j=30;j<100;j++){
				wei.append("<option value ="+j+">"+j+"</option>");
			}
			var option = "";
			for(var i = 0; i <
				nations.length; i++) {
				option += '<option value="' + (i + 1) + '">' + nations[i] + '</option>';
			}
			$(option).appendTo("#nation");
			
			var constellation=$("select[name='constellation']");
			for(var i=0;i<constellations.length;i++){
				constellation.append("<option value ="+i+">"+constellations[i].Name+"</option>");
			}
			
			var education_e=$("select[name='education']");
			for(var i=0;i<EDUCATIONS.length;i++){
				education_e.append("<option value ="+i+">"+EDUCATIONS[i]+"</option>");
			}
			
			var form = layui.form;
			form.on('submit', function(data){
				console.log(data.elem) //被执行事件的元素DOM对象，一般为button对象
				console.log(data.form) //被执行提交的form对象，一般在存在form标签时才会返回
				if(1==data.field.house);
				else data.field.house = 0;
				if(1==data.field.car);
				else data.field.car = 0;
				console.log(data.field) //当前容器的全部表单字段，名值对形式：{name: value}
				
				Ajax(ajax_submit,data.field);
				return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
			});
		});
		
		function ajax_submit(obj){
			if(obj.Code>0)layer.msg(obj.Msg);
			else {
				var ary = JSON.parse(obj.Result); 
				layer.msg("提交成功");
				window.location.reload();
			}
		}
		
		
		
	</script>
</html>